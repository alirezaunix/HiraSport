{% extends "layouts/base.html" %}

{% block title %} Profile {% endblock %} 

<!-- Element injected in the BODY element -->
{% block body_class %} sidebar-mini {% endblock body_class %}

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}
  <!-- Bootstrap 3.3.7 -->
  <link rel="stylesheet" href="{{ ASSETS_ROOT }}/dist/css/bootstrap-theme.css">
  <!-- Bootstrap rtl -->
  <link rel="stylesheet" href="{{ ASSETS_ROOT }}/dist/css/rtl.css">
  <!-- Font Awesome -->
  <link rel="stylesheet" href="{{ ASSETS_ROOT }}/bower_components/font-awesome/css/font-awesome.min.css">
  <!-- Ionicons -->
  <link rel="stylesheet" href="{{ ASSETS_ROOT }}/bower_components/Ionicons/css/ionicons.min.css">
  <!-- Theme style -->
  <link rel="stylesheet" href="{{ ASSETS_ROOT }}/dist/css/AdminLTE.css">
  <!-- AdminLTE Skins. Choose a skin from the css/skins
       folder instead of downloading all of them to reduce the load. -->
  <link rel="stylesheet" href="{{ ASSETS_ROOT }}/dist/css/skins/_all-skins.min.css">

{% endblock stylesheets %}

{% block content %}  

<div class="content-wrapper">
    <!-- Content Header (Page header) -->
    <section class="content-header">
      <h1>
        پروفایل کاربری
      </h1>
      <ol class="breadcrumb">
        <li><a href="#"><i class="fa fa-dashboard"></i> خانه</a></li>
        <li><a href="#">مثال ها</a></li>
        <li class="active"> پروفایل</li>
      </ol>
    </section>

    <!-- Main content -->
    <section class="content">

      <div class="row">
        <div class="col-md-3">

          <!-- Profile Image -->
          <div class="box box-primary">
            <div class="box-body box-profile">
              {% if imglen != 0 %}
              <img class="profile-user-img img-responsive img-circle" src="{{person.simage.url}}" alt="User profile picture">
              {% endif %}
              <h3 class="profile-username text-center">{{person.first_name }} {{person.last_name}}</h3>
              <form method='POST'>
                  {% csrf_token %}
                  {% if buttonShow %}
                      <button type="submit" name="register" class="btn btn-danger btn-block">کسر یک جلسه</button>
                  {%endif%}
              </form>
            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->

          <!-- About Me Box -->

          <div class="box box-primary">
            <div class="box-header with-border">
            </div>
            <!-- /.box-header -->
            <div class="box-body">
              
              
              <strong> تاریخ تولد</strong>
              <p class="text-muted">
                  {{person.dob}}
              </p>

              <hr>

              <strong> جنسیت</strong>

              {% if person.gender == "m" %}                                
                  <p class="text-muted"> مرد </p>
              {% else %}
                    <p class="text-muted"> زن </p>
              {% endif %}

              <hr>
              <strong><i class="fa fa-pencil margin-r-5"></i>تعداد جلسات باقی مانده</strong>
              <p>
                  {{ person.rsession }}
              </p>

              <hr>
              <strong><i class="fa fa-pencil margin-r-5"></i>تاریخ ثبت بعدی بیمه ورزشی:</strong>
              <p>
                  {{ nextinsurance }}
              </p>

              <hr>
              <strong><i class="fa fa-pencil margin-r-5"></i>تاریخ آنالیز بعدی:</strong>
              <p>
                  {{ nextanalysis }}
              </p>


              <hr>
              <strong><i class="fa fa-pencil margin-r-5"></i>رشته ورزشی:</strong>
              <p>
                  {{ person.sfield }}
              </p>

              <hr>
              <strong><i class="fa fa-pencil margin-r-5"></i>مربی ورزشی:</strong>
              <p>
                <a href="/trainerreport/{{ person.classname.tname.id }}">
                   {{ person.classname.tname }}</a>
              </p>


            </div>
            <!-- /.box-body -->
          </div>
          
         
          <!-- /.box -->
        </div>
        <!-- /.col -->
        <div class="col-md-9">
          <div class="nav-tabs-custom">
            <ul class="nav nav-tabs">
              <li class="active"><a href="#analysis" data-toggle="tab">آنالیز ها</a></li>
              <li><a href="#charts" data-toggle="tab">نمودار</a></li>
              <li><a href="#sessions" data-toggle="tab">گزارش حضور</a></li>
              <li><a href="#abcenses" data-toggle="tab">گزارش غیبت</a></li>
              <li><a href="#peyments" data-toggle="tab">گزارش پرداخت</a></li>
            </ul>
            <div class="tab-content">
              <div class="active tab-pane" id="analysis">
                <div class="box-body table-responsive no-padding text-center">
                  <table class="table table-hover table-striped table-bordered">
                                  <tr>
                                    <th class="text-center">تاریخ</th>
                                    <th class="text-center" colspan=4>وضعیت موجود</th>
                                    <th class="text-center border-right" colspan=4>تغییرات</th>
                                    <th class="text-center" colspan=4>هدف مقطعی</th>
                                </tr>
            
                                <tr>
                                    <th></th>
                                    <th class="text-center">وزن</th>
                                    <th class="text-center">توده<br>چربی</th>
                                    <th class="text-center">عضله</th>
                                    <th class="text-center"> درصد<br>چربی</th>
                                    <th class="text-center">وزن</th>
                                    <th class="text-center">توده<br>چربی</th>
                                    <th class="text-center">عضله</th>
                                    <th class="text-center"> درصد<br>چربی</th>
                                    <th class="text-center">وزن</th>
                                    <th class="text-center">توده<br>چربی</th>
                                    <th class="text-center">عضله</th>
                                    <th class="text-center"> درصد<br>چربی</th>
                                </tr>
                                {% for s in analysis%}
                                <tr>
                                    <td>{{s.dot}}</td>
                                    <td>{{s.current_state_weight}}</td>
                                    <td>{{s.current_state_bfm}}</td>
                                    <td>{{s.current_state_smm}}</td>
                                    <td>{{s.current_state_pbf}}</td>
                                   
                                    <td >
                                    {% if s.diffrence_weight > 0 %}   <small style="font-size: 100%;  max-width: 75%;  label.padding: 0.4em 0.6em 0.3em;" class=" bg-green">{{s.diffrence_weight}}</small> {% else %}<small style="font-size: 100%;" class="bg-red">{{s.diffrence_weight}}</small>{% endif %}</td>
                                    </td>
                                    <td>{{s.diffrence_bfm}}</td>
                                    <td>{{s.diffrence_smm}}</td>
                                    <td>{{s.diffrence_pbf}}</td>
                                    
                                    <td>{{s.point_state_weight}}</td>
                                    <td>{{s.point_state_bfm}}</td>
                                    <td>{{s.point_state_smm}}</td>
                                    <td>{{s.point_state_pbf}}</td>

                                </tr>
                                {%endfor%}
                  </table>
                  </div>
     
                </div>
              <!-- /.tab-pane -->
              <div class="tab-pane" id="charts">
                <div class="box-body  no-padding">
                                     <div id="chartContainer"></div>

                </div>              
              </div>
              <div class="tab-pane" id="sessions">
                <div class="box-body table-responsive no-padding">
                  <table class="table table-hover">
                                <tr>
                                    <th>ردیف</th>
                                    <th>روز حضور</th>
                                </tr>
                                {% for s in session%}
                                <tr>
                                    <td>{{s.id}}</td>
                                    <td>{{s.dos}}</td>
                                </tr>
                                {%endfor%}
                  </table>
                </div>              
              </div>
              <!-- /.tab-pane -->
              <div class="tab-pane" id="abcenses">
                <div class="box-body table-responsive no-padding">
                  <table class="table table-hover">
                                <tr>
                                    <th>ردیف</th>
                                    <th>روز غیبت</th>
                                </tr>
                                {% for s in absence%}
                                <tr>
                                    <td>{{s.id}}</td>
                                    <td>{{s.doa}}</td>
                                </tr>
                                {%endfor%}
                  </table>
                </div>              
              </div>
              <div class="tab-pane" id="peyments">
                <div class="box-body table-responsive no-padding">
                  <table class="table table-hover">
                                <tr>
                                    <th>ردیف</th>
                                    <th>روز پرداخت</th>
                                    <th>مقدار پرداخت</th>
                                    <th>تعداد جلسات شارژ شده</th>
                                </tr>
                                {% for s in peyment%}
                                <tr>
                                    <td>{{s.id}}</td>
                                    <td>{{s.dop}}</td>
                                    <td>{{s.mcharged}}</td>
                                    <td>{{s.ncharged}}</td>
                                </tr>
                                {%endfor%}
                  </table>
                </div>              
             </div>
              <!-- /.tab-pane -->
            </div>
            <!-- /.tab-content -->
          </div>
          <!-- /.nav-tabs-custom -->
        </div>


        <!-- /.col -->
      </div>
      <!-- /.row -->

    </section>
    <!-- /.content -->
  </div>  

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}


<!-- jQuery 3 -->
<script src="{{ ASSETS_ROOT }}/bower_components/jquery/dist/jquery.min.js"></script>
<!-- Bootstrap 3.3.7 -->
<script src="{{ ASSETS_ROOT }}/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<!-- FastClick -->
<script src="{{ ASSETS_ROOT }}/bower_components/fastclick/lib/fastclick.js"></script>
<!-- AdminLTE App -->
<script src="{{ ASSETS_ROOT }}/dist/js/adminlte.min.js"></script>
<!-- AdminLTE for demo purposes -->
<script src="{{ ASSETS_ROOT }}/dist/js/demo.js"></script>
<script src="{{ ASSETS_ROOT }}/dist/js/canvasjs.min.js"></script>

<script>
  window.onload = function () {
    var chart = new CanvasJS.Chart("chartContainer", {
      title: {
        text: "نمودار ماهانه"             
      },
      animationEnabled: true,
      axisY: {
        title: "کیلو"
      },
      toolTip: {
        shared: true
      },
      legend: {
        cursor: "pointer",
        itemclick: function(e) {
          if (typeof(e.dataSeries.visible) === "undefined" || e.dataSeries.visible) {
            e.dataSeries.visible = false;
          }
          else {
            e.dataSeries.visible = true;
          }
          chart.render();
        }
      },
      data: [{
        type: "stackedArea",
        name: "وزن",
        showInLegend: true,
        yValueFormatString: "0.#کیلو",
        markerSize: 0,
        dataPoints: {{ very_distracting_data|safe }}
      },{
        type: "stackedArea",        
        name: "توده چربی",
        showInLegend: true,
        yValueFormatString: "0.#کیلو",
        markerSize: 0,
        dataPoints: {{ distracting_data|safe }}
      },{
        type: "stackedArea",
        name: "عضله",
        showInLegend: true,
        yValueFormatString: "0.#کیلو",
        markerSize: 0,
        dataPoints: {{ productive_data|safe }}
      },]
    });
    chart.render();
  }
</script>

{% endblock javascripts %}  
